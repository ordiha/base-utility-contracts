<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Base Community Tools</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
  <!-- Header -->
  <header class="bg-blue-600 text-white shadow-md">
    <div class="max-w-6xl mx-auto px-6 py-6 flex justify-between items-center">
      <h1 class="text-2xl font-bold">Base Community Tools</h1>
      <button id="connectBtn" class="bg-white text-blue-600 px-4 py-2 rounded-lg font-medium shadow hover:bg-gray-100">
        Connect Wallet
      </button>
    </div>
  </header>

  <!-- Intro -->
  <section class="max-w-6xl mx-auto px-6 py-12">
    <h2 class="text-3xl font-bold mb-4">üåê Open-Source Contracts on Base</h2>
    <p class="text-lg text-gray-600">
      Interact with deployed smart contracts on the <a href="https://base.org" target="_blank" class="text-blue-600 underline">Base</a> network.
      Connect your wallet to start using the tools directly.
    </p>
  </section>

  <!-- Contracts Grid -->
  <section class="max-w-6xl mx-auto px-6 py-8 grid md:grid-cols-2 gap-6" id="contractsGrid">
    <!-- Example Contract Card: TipJar -->
    <div class="bg-white rounded-2xl shadow p-6">
      <h3 class="text-xl font-semibold">üí∞ TipJar</h3>
      <p class="text-gray-600 text-sm mb-3">Send a tip directly to the contract.</p>
      <button onclick="sendTip()" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700">
        Send 0.01 ETH Tip
      </button>
    </div>

    <!-- Example Contract Card: VotePoll -->
    <div class="bg-white rounded-2xl shadow p-6">
      <h3 class="text-xl font-semibold">üó≥Ô∏è VotePoll</h3>
      <p class="text-gray-600 text-sm mb-3">Cast your vote in the poll.</p>
      <button onclick="castVote(1)" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700">
        Vote Option 1
      </button>
      <button onclick="castVote(2)" class="ml-2 bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700">
        Vote Option 2
      </button>
    </div>

    <!-- Example Contract Card: SimpleTimer -->
    <div class="bg-white rounded-2xl shadow p-6">
      <h3 class="text-xl font-semibold">‚è±Ô∏è SimpleTimer</h3>
      <p class="text-gray-600 text-sm mb-3">Start a timer.</p>
      <button onclick="startTimer()" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700">
        Start Timer
      </button>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-100 mt-12 py-6">
    <div class="max-w-6xl mx-auto px-6 text-center text-gray-600">
      Built with ‚ù§Ô∏è for the Base ecosystem. <br />
      <span class="text-sm">Open-source repo on GitHub.</span>
    </div>
  </footer>

  <!-- Script Section -->
  <script>
    let provider, signer;

    // Connect wallet
    async function connectWallet() {
      if (!window.ethereum) {
        alert("MetaMask not found! Please install it.");
        return;
      }
      provider = new ethers.providers.Web3Provider(window.ethereum);
      await provider.send("eth_requestAccounts", []);
      signer = provider.getSigner();
      document.getElementById("connectBtn").innerText = "Wallet Connected";
    }
    document.getElementById("connectBtn").onclick = connectWallet;

    // Contract Addresses
    const tipJarAddress = "0x62A3536df479317Bd76480F801278867dB1603Ff";
    const votePollAddress = "0xCb8A9D3E1Bd3Ea1793DED3373CA1CAc1969766A1";
    const simpleTimerAddress = "0xC1949249093af2d0aaB8a2D2B241e0B828171DE7";

    // Minimal ABIs
    const tipJarAbi = ["function deposit() payable"];
    const votePollAbi = ["function vote(uint256 option)"];
    const timerAbi = ["function startTimer()"];

    // Send Tip
    async function sendTip() {
      const contract = new ethers.Contract(tipJarAddress, tipJarAbi, signer);
      const tx = await contract.deposit({ value: ethers.utils.parseEther("0.01") });
      await tx.wait();
      alert("Tip sent!");
    }

    // Cast Vote
    async function castVote(option) {
      const contract = new ethers.Contract(votePollAddress, votePollAbi, signer);
      const tx = await contract.vote(option);
      await tx.wait();
      alert("Vote submitted!");
    }

    // Start Timer
    async function startTimer() {
      const contract = new ethers.Contract(simpleTimerAddress, timerAbi, signer);
      const tx = await contract.startTimer();
      await tx.wait();
      alert("Timer started!");
    }
  </script>
</body>
</html>
